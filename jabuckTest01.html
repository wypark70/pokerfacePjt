<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        #musicContainer {
            width: 500px;
        }
        #musicContainer > audio {
            width: 100%;
        }
        #musicContainer > canvas {
            width: 100%;
            height: 200px;
        }
    </style>
</head>
<body>
<div id="musicContainer">
    <audio autoplay controls>
        <source src="./music/001.mp3" type="audio/mpeg" />
    </audio>
    <canvas></canvas>
</div>
<script src="libs/jquery/1.11.2/jquery-1.11.2.js"></script>
<script>
    var canvas = document.querySelector('canvas');
    var ctx = canvas.getContext('2d');

    // here we create our chain
    var audio = document.querySelector('audio');
    var audioContext = new AudioContext();
    var source = audioContext.createMediaElementSource(audio);
    var analyser = audioContext.createAnalyser();

    var width = canvas.width;
    var height = canvas.height * 2.5;

    source.connect(analyser);
    analyser.connect(audioContext.destination);

    setInterval(function(){
        var freqData = new Uint8Array(analyser.frequencyBinCount);

        analyser.getByteFrequencyData(freqData);
        ctx.clearRect(0, 0, width, height);
        for (var i = 0; i < freqData.length; i++ ) {
            var magnitude = freqData[i];
            ctx.fillRect(i*1.5, height, 1, -magnitude * 2);
        }
    }, 33);
</script>
</body>
</html>